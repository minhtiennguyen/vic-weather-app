{"version":3,"sources":["config.js","actions/weather.js","constants/actionTypes.js","components/Weather/WeatherItem.js","utils/index.js","components/Weather/MainWeather.js","components/Weather/index.js","components/App/index.js","reducer/weather.js","reducer/index.js","store/index.js","serviceWorker.js","index.js"],"names":["config","apiKey","process","apiUrl","imgUrl","fetchWeatherSuccess","createAction","fetchWeatherFailed","WeatherItem","city","selectCity","className","onClick","id","name","convertUnixTimestamp","timestamp","d","Date","hours","getHours","slice","minutes","getMinutes","MainWeather","src","weather","icon","alt","description","main","temp","sys","sunrise","sunset","feels_like","humidity","wind","speed","deg","pressure","visibility","Weather","state","unit","props","fetchWeather","this","cities","isLoaded","hasError","selectedIndex","findIndex","selected","map","key","Component","mapDispatchToProps","cityId","dispatch","url","type","fetch","then","res","json","result","err","connect","list","App","citiesList","handleFetchWeatherSuccess","action","foundIndex","payload","loaded","initialState","weatherReducer","error","rootReducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","Boolean","window","location","hostname","match","app","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8cd49826.chunk.js","sourcesContent":["const config = {\n  apiKey: process.env.REACT_APP_WEATHER_API_KEY,\n  apiUrl: 'http://api.openweathermap.org/data/2.5/weather',\n  imgUrl: 'http://openweathermap.org/img/wn'\n}\n\nexport default config;\n","import { FETCH_WEATHER, FETCH_WEATHER_SUCCESS, FETCH_WEATHER_FAILED } from '../constants/actionTypes';\nimport { createAction } from 'redux-actions';\nimport config from '../config';\n\nconst fetchWeatherSuccess = createAction(FETCH_WEATHER_SUCCESS);\nconst fetchWeatherFailed = createAction(FETCH_WEATHER_FAILED);\n\nconst fetchWeather = (cityId, unit) => dispatch => {\n  const url = `${config.apiUrl}?id=${cityId}&APPID=${config.apiKey}&units=${unit}`;\n  dispatch({ type: FETCH_WEATHER });\n  return fetch(url)\n    .then(res => res.json())\n    .then(\n      result => dispatch(fetchWeatherSuccess(result)),\n      err => dispatch(fetchWeatherFailed(err))\n    );\n}\n\nexport { fetchWeather };\n","export const FETCH_WEATHER = 'FETCH_WEATHER';\nexport const FETCH_WEATHER_SUCCESS = 'FETCH_WEATHER_SUCCESS';\nexport const FETCH_WEATHER_FAILED = 'FETCH_WEATHER_FAILED';\n","import React from 'react';\n\nconst WeatherItem = ({ city, selectCity }) => {\n  return (\n    <div className='weather-item' onClick={() => selectCity(city.id)}>\n      <p className='weather-city__name'>{city.name}</p>\n    </div>\n  );\n};\n\nexport default WeatherItem;\n","const convertUnixTimestamp = timestamp => {\n  const d = new Date(timestamp * 1000);\n  const hours = ('0' + d.getHours()).slice(-2);\n  const minutes = ('0' + d.getMinutes()).slice(-2);\n  return `${hours}:${minutes} ${hours > 12 ? 'PM' : 'AM'}`;\n};\n\nexport {\n  convertUnixTimestamp\n};\n","import React from 'react';\nimport config from '../../config';\nimport { convertUnixTimestamp } from '../../utils';\n\nconst MainWeather = ({ city }) => (\n  <div className='main-city'>\n    <div className='main-city_header'>\n      <h1 className='main-city__name'>{city.name}</h1>\n      <span className='main-city__icon'>\n        <img\n          src={`${config.imgUrl}/${city.weather[0].icon}@2x.png`}\n          alt='weather-icon'\n        />\n      </span>\n      <span className='main-city__desc'>{city.weather[0].description}</span>\n      <span className='main-city__temp'>{city.main.temp} &deg;C</span>\n    </div>\n\n    <div className='main-city__conditions'>\n      <div className='main-city__info'>\n        <div>\n          <span className='heading'>Sunrise</span> <br />{' '}\n          {convertUnixTimestamp(city.sys.sunrise)}\n        </div>\n        <div>\n          <span className='heading'>Sunset</span> <br />{' '}\n          {convertUnixTimestamp(city.sys.sunset)}\n        </div>\n      </div>\n      <div className='main-city__info'>\n        <div>\n          <span className='heading'>Feels like</span> <br />{' '}\n          {city.main.feels_like} &deg;C\n        </div>\n        <div>\n          <span className='heading'>Humidity</span> <br /> {city.main.humidity}%\n        </div>\n      </div>\n      <div className='main-city__info'>\n        <div>\n          <span className='heading'>Wind</span> <br /> w {city.wind.speed} km/h\n        </div>\n        <div>\n          <span className='heading'>Wind Direction</span> <br /> {city.wind.deg}\n          &deg;\n        </div>\n      </div>\n      <div className='main-city__info'>\n        <div>\n          <span className='heading'>Pressure</span> <br /> {city.main.pressure}{' '}\n          hPa\n        </div>\n        <div>\n          <span className='heading'>Visibility</span> <br />{' '}\n          {city.visibility / 1000} km\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nexport default MainWeather;\n","import React, { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\n\nimport { fetchWeather } from '../../actions/weather';\nimport WeatherItem from './WeatherItem';\nimport MainWeather from './MainWeather';\n\nclass Weather extends Component {\n  state = {\n    city: {\n      id: 2158177,\n      name: 'Melbourne',\n    },\n    unit: 'metric',\n  };\n\n  componentDidMount() {\n    const { city, unit } = this.state;\n    this.props.fetchWeather(city.id, unit);\n  }\n\n  selectCity = id => {\n    const { unit } = this.state;\n    this.props.fetchWeather(id, unit);\n  };\n\n  render() {\n    const { cities, isLoaded, hasError } = this.props;\n    const selectedIndex = cities.findIndex(city => city.selected === true);\n\n    return (\n      <Fragment>\n        {isLoaded ? <MainWeather city={cities[selectedIndex]} /> : <div className='spinner'>loading...</div>}\n        <div className='cities'>\n          {(cities || []).map(city => (\n            <WeatherItem\n              key={city.id}\n              city={city}\n              selectCity={this.selectCity}\n            />\n          ))}\n        </div>\n        {hasError && <div className='error'>Something went wrong</div>}\n      </Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  cities: state.weather.list,\n  isLoaded: state.weather.isLoaded,\n  hasError: state.weather.hasError\n});\n\nconst mapDispatchToProps = {\n  fetchWeather\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Weather);\n\nexport { WeatherItem, MainWeather, Weather };\n","import React from 'react';\n\nimport Weather from '../Weather';\n\nconst App = () => (\n  <div className='app'>\n    <Weather />\n  </div>\n);\n\nexport default App;\n","import data from '../assets/data.json';\nimport {\n  FETCH_WEATHER,\n  FETCH_WEATHER_FAILED,\n  FETCH_WEATHER_SUCCESS,\n} from '../constants/actionTypes';\n\nconst citiesList = data.map(city => {\n  return { id: city.id, name: city.name, selected: false };\n});\n\nconst handleFetchWeatherSuccess = (state, action) => {\n  const { list } = state;\n  list.map(city => (city.selected = false));\n  const foundIndex = list.findIndex(city => city.id === action.payload.id);\n  list[foundIndex] = action.payload;\n  list[foundIndex].selected = true;\n  list[foundIndex].loaded = true;\n  return {\n    list,\n    isLoaded: true,\n  };\n}\n\nconst initialState = {\n  list: citiesList,\n  isLoaded: false,\n  hasError: false,\n};\n\nconst weatherReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case FETCH_WEATHER:\n      return {\n        ...state,\n        isLoaded: false,\n        hasError: false,\n      };\n    case FETCH_WEATHER_SUCCESS: return handleFetchWeatherSuccess(state, action);\n    case FETCH_WEATHER_FAILED:\n      return {\n        ...state,\n        isLoaded: true,\n        hasError: true,\n        error: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default weatherReducer;\n","import { combineReducers } from 'redux';\nimport weatherReducer from './weather';\n\nconst rootReducer = combineReducers({\n  weather: weatherReducer\n});\nexport default rootReducer;\n","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport rootReducer from '../reducer';\n\nconst store = createStore(rootReducer, composeWithDevTools(\n  applyMiddleware(thunk)\n));\n\nexport default store;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport './index.css';\nimport App from './components/App';\nimport store from './store';\nimport * as serviceWorker from './serviceWorker';\n\nconst app = (\n  <Provider store={store}>\n    <App />\n  </Provider>\n);\n\nReactDOM.render(app, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}